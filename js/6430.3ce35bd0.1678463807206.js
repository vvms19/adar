"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[6430],{96430:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingState,expression:"loadingState"}],ref:"table",staticClass:"explore-table",attrs:{data:e.tableItems,"highlight-current-row":!1,size:"small"}},[a("s-table-column",{attrs:{width:"240",label:"#","fixed-position":"left"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"explore-table-item-index"},[a("span",{class:["explore-table-item-index--head",{active:e.isDefaultSort}],on:{click:e.handleResetSort}},[e._v(" # ")])]),a("div",{staticClass:"explore-table-item-logo"},[a("s-icon",{staticClass:"explore-table-item-logo--head",attrs:{name:"various-bone-24",size:"14px"}})],1),a("div",{staticClass:"explore-table-item-info explore-table-item-info--head"},[a("span",{staticClass:"explore-table__primary"},[e._v(e._s(e.t("nameText")))])])]},proxy:!0},{key:"default",fn:function(t){var s=t.$index,o=t.row;return[a("span",{staticClass:"explore-table-item-index explore-table-item-index--body"},[e._v(e._s(s+e.startIndex+1))]),a("pair-token-logo",{staticClass:"explore-table-item-logo",attrs:{"first-token":o.baseAsset,"second-token":o.targetAsset,size:"small"}}),a("div",{staticClass:"explore-table-item-info explore-table-item-info--body"},[a("div",{staticClass:"explore-table-item-name"},[e._v(e._s(o.baseAsset.symbol)+"-"+e._s(o.targetAsset.symbol))])])]}}])}),e.hasApyColumnData?a("s-table-column",{key:"apy",attrs:{width:"120","header-align":"right",align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"apy",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v("APY")])])]},proxy:!0},{key:"default",fn:function(t){var s=t.row;return[a("span",{staticClass:"explore-table__accent"},[e._v(e._s(s.apyFormatted))])]}}],null,!1,1563531116)}):e._e(),e.isLoggedIn?a("s-table-column",{key:"logged",attrs:{width:"140","header-align":"right",align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[a("span",{staticClass:"explore-table__primary"},[e._v(e._s(e.t("balanceText")))])]},proxy:!0},{key:"default",fn:function(t){var s=t.row;return[a("div",{staticClass:"explore-table-item-tokens"},e._l(s.accountTokens,(function(t,s){var o=t.asset,r=t.balance,i=t.balancePrefix;return a("div",{key:s,staticClass:"explore-table-cell"},[a("formatted-amount",{staticClass:"explore-table-item-price explore-table-item-amount",attrs:{"value-can-be-hidden":"","font-size-rate":e.FontSizeRate.SMALL,value:r},scopedSlots:e._u([{key:"prefix",fn:function(){return[e._v(e._s(i))]},proxy:!0}],null,!0)}),a("token-logo",{staticClass:"explore-table-item-logo explore-table-item-logo--plain",attrs:{size:"small",token:o}})],1)})),0)]}}],null,!1,596145239)}):e._e(),e.pricesAvailable?a("s-table-column",{key:"tvl",attrs:{width:"104","header-align":"right",align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"tvl",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v(e._s(e.TranslationConsts.TVL))]),a("s-tooltip",{attrs:{"border-radius":"mini",content:e.t("tooltips.tvl")}},[a("s-icon",{attrs:{name:"info-16",size:"14px"}})],1)],1)]},proxy:!0},{key:"default",fn:function(t){var s=t.row;return[a("formatted-amount",{staticClass:"explore-table-item-price explore-table-item-amount",attrs:{"is-fiat-value":"","font-weight-rate":e.FontWeightRate.MEDIUM,value:s.tvlFormatted.amount}},[e._v(" "+e._s(s.tvlFormatted.suffix)+" ")])]}}],null,!1,2220507479)}):e._e()],1),a("s-pagination",{staticClass:"explore-table-pagination",attrs:{layout:"prev, total, next","current-page":e.currentPage,"page-size":e.pageAmount,total:e.filteredItems.length},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"prev-click":e.handlePrevClick,"next-click":e.handleNextClick}})],1)},o=[],r=a(60760),i=a(70655),l=a(53545),n=a(37365),c=a(36930),u=a(63637),p=a(73331),d=a(32806),m=a(24380),h=a(74614),b=a(80710),f=a(16546),g=a(85530);let x=class extends((0,l.Wr)(p.Z,d.Z,m.Z)){constructor(...e){super(...e),(0,r.Z)(this,"accountLiquidity",void 0),(0,r.Z)(this,"whitelist",void 0),(0,r.Z)(this,"order",u.Sr.DESC),(0,r.Z)(this,"property","tvl"),(0,r.Z)(this,"poolReserves",{})}get items(){return Object.entries(this.poolReserves).reduce(((e,[t,a])=>{if(a.some((e=>(0,g.yA)(e))))return e;const s=t.match(/0x\w{64}/g);if(!s||!s[0]||!s[1]||!this.whitelist[s[0]]||!this.whitelist[s[1]])return e;const o=this.getAsset(s[0]),r=this.getAsset(s[1]);if(!o||!r)return e;const i=`${o.symbol}-${r.symbol}`,l=this.accountLiquidity.find((e=>e.firstAddress===o.address&&e.secondAddress===r.address)),n=c.FPNumber.fromCodecValue(this.getAssetFiatPrice(o)??0),u=c.FPNumber.fromCodecValue(a[0]??0),p=c.FPNumber.fromCodecValue(this.getPoolApy(o.address,r.address)??0).mul(c.FPNumber.HUNDRED),d=n.mul(u).mul(new c.FPNumber(2)),m=[{asset:o,balance:(0,g.Gc)(c.FPNumber.fromCodecValue(l?.firstBalance??0)),balancePrefix:l?"~":""},{asset:r,balance:(0,g.Gc)(c.FPNumber.fromCodecValue(l?.secondBalance??0)),balancePrefix:l?"~":""}];return e.push({name:i,baseAsset:o,targetAsset:r,apy:p.toNumber(),apyFormatted:(0,g.Gc)(p,!0),tvl:d.toNumber(),tvlFormatted:(0,g.kF)(d),isAccountItem:!!l,accountTokens:m}),e}),[])}get preparedItems(){return this.isAccountItems?this.items.filter((e=>e.isAccountItem)):this.items}get hasApyColumnData(){return this.items.some((e=>0!==e.apy))}async updateExploreData(){await this.withLoading((async()=>{await this.withParentLoading((async()=>{this.poolReserves=await n.hi.poolXyk.getAllReserves()}))}))}};(0,i.__decorate)([h.SB.pool.accountLiquidity],x.prototype,"accountLiquidity",void 0),(0,i.__decorate)([h.Yn.wallet.account.whitelist],x.prototype,"whitelist",void 0),x=(0,i.__decorate)([(0,l.wA)({components:{PairTokenLogo:(0,b.kF)(f.z8.PairTokenLogo),SortButton:(0,b.kF)(f.z8.SortButton),TokenLogo:n.wx.TokenLogo,FormattedAmount:n.wx.FormattedAmount}})],x);var v=x,y=v,_=a(1001),k=(0,_.Z)(y,s,o,!1,null,null,null),w=k.exports}}]);