"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[5367],{5367:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingState,expression:"loadingState"}],ref:"table",staticClass:"explore-table",attrs:{data:e.tableItems,"highlight-current-row":!1,size:"small"}},[a("s-table-column",{attrs:{width:"320",label:"#","fixed-position":"left"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"explore-table-item-index"},[a("span",{class:["explore-table-item-index--head",{active:e.isDefaultSort}],on:{click:e.handleResetSort}},[e._v(" # ")])]),a("div",{staticClass:"explore-table-item-logo"},[a("s-icon",{staticClass:"explore-table-item-logo--head",attrs:{name:"various-bone-24",size:"14px"}})],1),a("div",{staticClass:"explore-table-item-info explore-table-item-info--head"},[a("span",{staticClass:"explore-table__primary"},[e._v(e._s(e.t("nameText")))]),a("span",{staticClass:"explore-table__secondary"},[e._v("("+e._s(e.t("tokens.assetId"))+")")])])]},proxy:!0},{key:"default",fn:function(t){var r=t.$index,s=t.row;return[a("span",{staticClass:"explore-table-item-index explore-table-item-index--body"},[e._v(e._s(r+e.startIndex+1))]),a("token-logo",{staticClass:"explore-table-item-logo",attrs:{"token-symbol":s.symbol}}),a("div",{staticClass:"explore-table-item-info explore-table-item-info--body"},[a("div",{staticClass:"explore-table-item-name"},[e._v(e._s(s.name))]),a("div",{staticClass:"explore-table-item-address"},[a("token-address",{staticClass:"explore-table-item-address__value",attrs:{"show-name":!1,name:s.name,symbol:s.symbol,address:s.address}})],1)])]}}])}),a("s-table-column",{attrs:{width:"108","header-align":"center",align:"center",prop:"symbol"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"symbol",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v(e._s(e.t("tokens.symbol")))])])]},proxy:!0},{key:"default",fn:function(t){var r=t.row;return[a("div",{staticClass:"explore-table-item-symbol"},[e._v(e._s(r.symbol))])]}}])}),e.pricesAvailable?a("s-table-column",{key:"price",attrs:{width:"130","header-align":"left",align:"left"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"price",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v("Price")])])]},proxy:!0},{key:"default",fn:function(t){var r=t.row;return[a("formatted-amount",{staticClass:"explore-table-item-price",attrs:{"is-fiat-value":"","fiat-default-rounding":"","font-weight-rate":e.FontWeightRate.MEDIUM,value:r.priceFormatted}})]}}],null,!1,3821265831)}):e._e(),e.hasTokensData?[a("s-table-column",{attrs:{width:"104","header-align":"right",align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"priceChangeDay",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v("1D %")])])]},proxy:!0},{key:"default",fn:function(e){var t=e.row;return[a("price-change",{attrs:{value:t.priceChangeDayFP}})]}}],null,!1,3047827492)}),a("s-table-column",{attrs:{width:"104","header-align":"left",align:"left"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"priceChangeWeek",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v("7D %")])])]},proxy:!0},{key:"default",fn:function(e){var t=e.row;return[a("price-change",{attrs:{value:t.priceChangeWeekFP}})]}}],null,!1,2114517730)}),a("s-table-column",{attrs:{width:"104","header-align":"right",align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"volumeWeek",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v("1D Vol.")])])]},proxy:!0},{key:"default",fn:function(t){var r=t.row;return[a("formatted-amount",{staticClass:"explore-table-item-price explore-table-item-amount",attrs:{"is-fiat-value":"","font-weight-rate":e.FontWeightRate.MEDIUM,value:r.volumeWeekFormatted.amount}},[e._v(" "+e._s(r.volumeWeekFormatted.suffix)+" ")])]}}],null,!1,1033088576)}),a("s-table-column",{attrs:{width:"104","header-align":"right",align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"tvl",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v(e._s(e.TranslationConsts.TVL))]),a("s-tooltip",{attrs:{"border-radius":"mini",content:e.t("tooltips.tvl")}},[a("s-icon",{attrs:{name:"info-16",size:"14px"}})],1)],1)]},proxy:!0},{key:"default",fn:function(t){var r=t.row;return[a("formatted-amount",{staticClass:"explore-table-item-price explore-table-item-amount",attrs:{"is-fiat-value":"","font-weight-rate":e.FontWeightRate.MEDIUM,value:r.tvlFormatted.amount}},[e._v(" "+e._s(r.tvlFormatted.suffix)+" ")])]}}],null,!1,2220507479)})]:e._e()],2),a("s-pagination",{staticClass:"explore-table-pagination",attrs:{layout:"prev, total, next","current-page":e.currentPage,"page-size":e.pageAmount,total:e.filteredItems.length},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"prev-click":e.handlePrevClick,"next-click":e.handleNextClick}})],1)},s=[],o=a(60760),n=a(70655),i=a(92247),l=a(36930),u=a(53545),p=a(37365),d=a(63637),c=a(16546),m=a(80710),h=a(85530),f=a(74614),g=a(73331),b=a(32806);const y=i.Ps`
  query AssetsQuery($after: Cursor, $ids: [String!], $dayTimestamp: Int, $weekTimestamp: Int) {
    entities: assets(after: $after, filter: { and: [{ id: { in: $ids } }, { liquidity: { greaterThan: "1" } }] }) {
      pageInfo {
        hasNextPage
        endCursor
      }
      nodes {
        id
        liquidity
        daySnapshots: data(
          filter: { and: [{ timestamp: { greaterThanOrEqualTo: $dayTimestamp } }, { type: { equalTo: HOUR } }] }
          orderBy: [TIMESTAMP_ASC]
        ) {
          nodes {
            timestamp
            priceUSD
            volume
          }
        }
        weekSnapshot: data(
          filter: { timestamp: { greaterThanOrEqualTo: $weekTimestamp } }
          orderBy: [TIMESTAMP_ASC]
          first: 1
        ) {
          nodes {
            timestamp
            priceUSD
            volume
          }
        }
      }
    }
  }
`,v=e=>{const t=e.daySnapshots.nodes.reduce(((e,t)=>{const a=new l.FPNumber(t.volume.amountUSD);return e.add(a)}),l.FPNumber.ZERO);return{[e.id]:{reserves:l.FPNumber.fromCodecValue(e.liquidity??0),startPriceDay:new l.FPNumber(e.daySnapshots.nodes?.[0]?.priceUSD?.open??0),startPriceWeek:new l.FPNumber(e.weekSnapshot.nodes?.[0]?.priceUSD?.open??0),volume:t}}};let k=class extends((0,u.Wr)(g.Z,b.Z)){constructor(...e){super(...e),(0,o.Z)(this,"items",void 0),(0,o.Z)(this,"tokensData",{}),(0,o.Z)(this,"order",d.Sr.DESC),(0,o.Z)(this,"property","tvl")}get hasTokensData(){return 0!==Object.keys(this.tokensData).length}get preparedItems(){return Object.entries(this.tokensData).reduce(((e,[t,a])=>{const r=this.getAsset(t);if(!r)return e;const s=l.FPNumber.fromCodecValue(this.getAssetFiatPrice(r)??0),o=a?.startPriceDay??l.FPNumber.ZERO,n=a?.startPriceWeek??l.FPNumber.ZERO,i=a?.volume??l.FPNumber.ZERO,u=(0,h._Q)(s,o),p=(0,h._Q)(s,n),d=a?.reserves??l.FPNumber.ZERO,c=d.mul(s);return e.push({...r,price:s.toNumber(),priceFormatted:new l.FPNumber(s.toFixed(7)).toLocaleString(),priceChangeDay:u.toNumber(),priceChangeDayFP:u,priceChangeWeek:p.toNumber(),priceChangeWeekFP:p,volumeWeek:i.toNumber(),volumeWeekFormatted:(0,h.kF)(i),tvl:c.toNumber(),tvlFormatted:(0,h.kF)(c)}),e}),[])}async updateExploreData(){await this.withLoading((async()=>{await this.withParentLoading((async()=>{this.tokensData=await this.fetchTokensData()}))}))}async fetchTokensData(){const e=300*Math.floor(Date.now()/3e5),t=e-86400,a=e-604800,r=this.items.map((e=>e.address)),s={ids:r,dayTimestamp:t,weekTimestamp:a},o=await p.m5.fetchAllEntities(y,s,v);return o?o.reduce(((e,t)=>({...e,...t})),{}):{}}};(0,n.__decorate)([f.Yn.assets.whitelistAssets],k.prototype,"items",void 0),k=(0,n.__decorate)([(0,u.wA)({components:{PriceChange:(0,m.kF)(c.z8.PriceChange),SortButton:(0,m.kF)(c.z8.SortButton),TokenAddress:p.wx.TokenAddress,TokenLogo:p.wx.TokenLogo,FormattedAmount:p.wx.FormattedAmount}})],k);var _=k,x=_,w=a(1001),C=(0,w.Z)(x,r,s,!1,null,null,null),S=C.exports}}]);