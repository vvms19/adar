"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[6e3],{76e3:function(t,s,e){e.r(s),e.d(s,{default:function(){return x}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"history-container"},[e("s-card",{directives:[{name:"loading",rawName:"v-loading",value:t.parentLoading,expression:"parentLoading"}],staticClass:"history-content",attrs:{"border-radius":"medium",shadow:"always",primary:""}},[e("generic-page-header",{attrs:{"has-button-back":"",title:t.t("bridgeHistory.title")},on:{back:t.handleBack}},[e("s-button",{attrs:{type:"action",icon:"arrows-swap-90-24",disabled:t.historyLoading,tooltip:t.t("bridgeHistory.restoreHistory")},on:{click:function(s){return t.updateHistory(!0)}}})],1),e("s-form",{staticClass:"history-form",attrs:{"show-message":!1}},[t.history.length?e("search-input",{staticClass:"history--search",attrs:{placeholder:t.t("bridgeHistory.filterPlaceholder"),autofocus:""},on:{clear:t.handleResetSearch},model:{value:t.query,callback:function(s){t.query=s},expression:"query"}}):t._e(),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"history-items"},[t.hasHistory?t._l(t.filteredHistoryItems,(function(s){return e("div",{directives:[{name:"button",rawName:"v-button"}],key:"history-"+s.id,staticClass:"history-item",attrs:{tabindex:"0"},on:{click:function(e){return t.showHistory(s.id)}}},[e("div",{staticClass:"history-item-info"},[e("div",{staticClass:"history-item-title p4"},[e("formatted-amount",{attrs:{"value-can-be-hidden":"",value:t.formatAmount(s),"asset-symbol":s.symbol}}),e("i",{class:"s-icon--network s-icon-"+(t.isOutgoingType(s.type)?"sora":t.getEvmIcon(s.externalNetwork))}),e("span",{staticClass:"history-item-title-separator"},[t._v(" "+t._s(t.t("bridgeTransaction.for"))+" ")]),e("formatted-amount",{attrs:{"value-can-be-hidden":"",value:t.formatAmount(s),"asset-symbol":s.symbol}}),e("i",{class:"s-icon--network s-icon-"+(t.isOutgoingType(s.type)?t.getEvmIcon(s.externalNetwork):"sora")})],1),e("div",{staticClass:"history-item-date"},[t._v(t._s(t.formatHistoryDate(s)))])]),e("div",{class:t.historyStatusClasses(s)},[e("div",{staticClass:"history-item-status-text"},[t._v(t._s(t.historyStatusText(s)))]),e("s-icon",{staticClass:"history-item-status-icon",attrs:{name:t.historyStatusIconName(s),size:"16"}})],1)])})):e("p",{staticClass:"history-empty p4"},[t._v(t._s(t.t("bridgeHistory.empty")))]),t.hasHistory?e("history-pagination",{attrs:{"current-page":t.currentPage,"page-amount":t.pageAmount,loading:t.loading,total:t.total,"last-page":t.lastPage},on:{"pagination-click":t.handlePaginationClick}}):t._e()],2)],1)],1)],1)},a=[],r=e(60760),o=e(70655),n=e(53545),h=e(37365),c=e(36930),d=e(32806),u=e(63280),l=e(12759),g=e(41468),y=e(80710),m=e(16546),p=e(74614),f=e(28335);let P=class extends((0,n.Wr)(d.Z,u.Z,l.Z,g.Z,h.tA.PaginationSearchMixin,h.tA.NumberFormatterMixin)){constructor(...t){super(...t),(0,r.Z)(this,"registeredAssets",void 0),(0,r.Z)(this,"historyLoading",void 0),(0,r.Z)(this,"updateHistory",void 0),(0,r.Z)(this,"historyPage",void 0),(0,r.Z)(this,"pageAmount",8),(0,r.Z)(this,"loading",!0)}get filteredHistory(){return this.history?.length?this.getFilteredHistory(this.sortTransactions([...this.history],this.isLtrDirection)):[]}get total(){return this.filteredHistory.length}get hasHistory(){return this.filteredHistoryItems&&this.total>0}get filteredHistoryItems(){const t=this.isLtrDirection?Math.min(this.currentPage*this.pageAmount,this.filteredHistory.length):Math.max((this.lastPage-this.currentPage+1)*this.pageAmount-this.directionShift,0),s=this.isLtrDirection?Math.max(t-this.pageAmount,0):Math.max((this.lastPage-this.currentPage)*this.pageAmount-this.directionShift,0);return this.sortTransactions(this.getPageItems(this.filteredHistory,s,t),!0)}created(){this.withParentLoading((async()=>{this.setHistory(),await this.updateHistory(),1!==this.historyPage&&(this.currentPage=this.historyPage,1!==this.currentPage&&this.currentPage===this.lastPage&&(this.isLtrDirection=!1))})).finally((()=>{this.loading=!1}))}getFilteredHistory(t){if(this.query){const s=this.query.toLowerCase().trim();return t.filter((t=>`${t.assetAddress}`.toLowerCase().includes(s)||`${this.registeredAssets.find((s=>s.address===t.assetAddress))?.externalAddress}`.toLowerCase().includes(s)||`${t.symbol}`.toLowerCase().includes(s)))}return t}formatAmount(t){if(!t.amount)return"";const s=this.registeredAssets?.find((s=>s.address===t.address))?.decimals;return this.formatStringValue(t.amount,s)}formatHistoryDate(t){return this.formatDate(t?.startTime??Date.now())}isWaitingForAction(t){return t.status===c.BridgeTxStatus.Failed&&(0,f.rz)(t)}historyStatusClasses(t){const s="history-item-status",e=[s];return this.isWaitingForAction(t)?e.push(`${s}--warning`):t.status===c.BridgeTxStatus.Failed?e.push(`${s}--error`):t.status===c.BridgeTxStatus.Done?e.push(`${s}--success`):e.push(`${s}--pending`),e.join(" ")}historyStatusIconName(t){return this.isWaitingForAction(t)?"notifications-alert-triangle-24":t.status===c.BridgeTxStatus.Failed?"basic-clear-X-24":t.status===c.BridgeTxStatus.Done?"basic-check-marks-24":"time-time-24"}historyStatusText(t){return this.isWaitingForAction(t)?this.t("bridgeHistory.statusAction"):""}async handlePaginationClick(t){let s=1;switch(t){case h.it.PaginationButton.Prev:s=this.currentPage-1;break;case h.it.PaginationButton.Next:s=this.currentPage+1,s===this.lastPage&&(this.isLtrDirection=!1);break;case h.it.PaginationButton.First:this.isLtrDirection=!0;break;case h.it.PaginationButton.Last:s=this.lastPage,this.isLtrDirection=!1}await this.updateHistory(),this.currentPage=s,this.setHistoryPage(this.currentPage)}handleBack(){this.setHistoryPage(1),y.ZP.push({name:m.sn.Bridge})}handleResetSearch(){this.resetPage(),this.resetSearch()}};(0,o.__decorate)([p.SB.assets.registeredAssets],P.prototype,"registeredAssets",void 0),(0,o.__decorate)([p.SB.bridge.historyLoading],P.prototype,"historyLoading",void 0),(0,o.__decorate)([p.aD.bridge.updateHistory],P.prototype,"updateHistory",void 0),(0,o.__decorate)([p.Yn.bridge.historyPage],P.prototype,"historyPage",void 0),P=(0,o.__decorate)([(0,n.wA)({components:{GenericPageHeader:(0,y.kF)(m.z8.GenericPageHeader),SearchInput:h.wx.SearchInput,FormattedAmount:h.wx.FormattedAmount,HistoryPagination:h.wx.HistoryPagination}})],P);var v=P,b=v,H=e(1001),w=(0,H.Z)(b,i,a,!1,null,"4a2bf038",null),x=w.exports}}]);