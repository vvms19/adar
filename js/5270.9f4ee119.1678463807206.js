"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[5270],{45270:function(e,t,s){s.r(t),s.d(t,{default:function(){return g}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("dialog-base",{attrs:{visible:e.isVisible,title:e.TranslationConsts.APR+" "+e.t("demeterFarming.calculator")},on:{"update:visible":function(t){e.isVisible=t}}},[s("div",{staticClass:"calculator-dialog"},[e.poolAsset?s("s-row",{attrs:{flex:"",align:"middle"}},[e.isFarm&&e.baseAsset?s("pair-token-logo",{key:"pair",staticClass:"title-logo",attrs:{"first-token":e.baseAsset,"second-token":e.poolAsset}}):s("token-logo",{key:"token",staticClass:"title-logo",attrs:{token:e.poolAsset}}),s("span",{staticClass:"calculator-dialog-title"},[e.isFarm?[e._v(e._s(e.baseAsset.symbol)+"-")]:e._e(),e._v(e._s(e.poolAsset.symbol)+" ")],2)],1):e._e(),s("s-form",{staticClass:"el-form--actions",attrs:{"show-message":!1}},[e.isFarm&&e.baseAsset?[s("token-input",{attrs:{balance:e.baseAssetBalance.toCodecString(),"is-max-available":e.isBaseAssetMaxButtonAvailable,title:e.t("demeterFarming.amountAdd"),token:e.baseAsset,value:e.baseAssetValue},on:{input:e.handleBaseAssetValue,max:e.handleBaseAssetMax}}),e.poolAsset?s("s-icon",{staticClass:"icon-divider",attrs:{name:"plus-16"}}):e._e()]:e._e(),e.poolAsset?s("token-input",{attrs:{balance:e.poolAssetBalance.toCodecString(),"is-max-available":e.isPoolAssetMaxButtonAvailable,title:e.t("demeterFarming.amountAdd"),token:e.poolAsset,value:e.poolAssetValue},on:{input:e.handlePoolAssetValue,max:e.handlePoolAssetMax}}):e._e()],2),s("div",{staticClass:"duration"},[s("info-line",{staticClass:"duration-title",attrs:{label:"Duration"}}),s("s-tabs",{staticClass:"duration-tabs",attrs:{type:"rounded",value:e.selectedPeriod},on:{input:e.selectPeriod}},e._l(e.intervals,(function(e){return s("s-tab",{key:e,attrs:{name:String(e),label:e+"D"}})})),1)],1),s("div",{staticClass:"results"},[s("div",{staticClass:"results-title"},[e._v(e._s(e.TranslationConsts.APR)+" "+e._s(e.t("demeterFarming.results")))]),s("info-line",{attrs:{label:e.TranslationConsts.ROI,"label-tooltip":e.t("tooltips.roi"),value:e.calculatedRoiPercentFormatted}}),s("info-line",{attrs:{label:e.rewardsText,value:e.calculatedRewardsFormatted,"fiat-value":e.calculatedRewardsFiat}})],1),s("a",{staticClass:"demeter-copyright",attrs:{href:e.link,target:"_blank",rel:"nofollow noopener"}},[e._v(" "+e._s(e.t("demeterFarming.poweredBy"))+" ")])],1)])},i=[],l=s(60760),o=s(70655),r=s(53545),n=s(37365),u=s(36930),d=s(26181),c=s(80710),h=s(16546),m=s(85530);let b=class extends((0,r.Wr)(d.Z,n.tA.DialogMixin,n.tA.LoadingMixin)){constructor(...e){super(...e),(0,l.Z)(this,"emission",void 0),(0,l.Z)(this,"baseAssetValue",""),(0,l.Z)(this,"poolAssetValue",""),(0,l.Z)(this,"intervals",[1,7,30,90]),(0,l.Z)(this,"interval",1),(0,l.Z)(this,"link",h.yX.demeterFarmingPlatform)}resetValue(){this.baseAssetValue="",this.poolAssetValue=""}get networkFee(){return this.networkFees[u.Operation.DemeterFarmingDepositLiquidity]}get selectedPeriod(){return String(this.interval)}get rewardsText(){return this.t("demeterFarming.rewards",{symbol:this.rewardAssetSymbol})}get baseAssetDecimals(){return this.baseAsset?.decimals??u.FPNumber.DEFAULT_PRECISION}get baseAssetBalance(){return this.baseAsset?u.FPNumber.fromCodecValue((0,m.rh)(this.baseAsset)??0,this.baseAssetDecimals):u.FPNumber.ZERO}get isBaseAssetMaxButtonAvailable(){return!!this.baseAsset&&(0,m.oI)(!0,this.baseAsset,this.baseAssetValue,this.networkFee,this.xor)}get isPoolAssetMaxButtonAvailable(){return!!this.poolAsset&&(0,m.oI)(!0,this.poolAsset,this.poolAssetValue,this.networkFee,this.xor)}get userTokensDeposit(){return this.isFarm?this.lpBalance.mul(new u.FPNumber(this.poolAssetValue||0)).div(u.FPNumber.fromCodecValue(this.liquidity?.secondBalance??0)):new u.FPNumber(this.poolAssetValue||0)}get userTokensDepositWithFee(){const e=new u.FPNumber(this.depositFee);return this.userTokensDeposit.mul(u.FPNumber.ONE.sub(e))}get calculatedRewards(){if(!this.pool)return u.FPNumber.ZERO;const e=this.pool.totalTokensInPool.add(this.userTokensDepositWithFee);if(e.isZero())return u.FPNumber.ZERO;const t=new u.FPNumber(this.interval),s=new u.FPNumber(14400),a=t.mul(s);return this.emission.mul(a).mul(this.userTokensDepositWithFee).div(e)}get calculatedRewardsFormatted(){return"~"+this.calculatedRewards.toLocaleString()}get calculatedRewardsFiat(){return this.rewardAsset?this.getFiatAmountByFPNumber(this.calculatedRewards,this.rewardAsset):null}get calculatedRoiPercent(){const e=new u.FPNumber(this.poolAssetValue||0);if(e.isZero()||this.poolAssetPrice.isZero())return u.FPNumber.ZERO;const t=this.isFarm?2:1,s=e.mul(new u.FPNumber(t)).mul(this.poolAssetPrice),a=s.mul(new u.FPNumber(this.depositFee)),i=u.FPNumber.fromCodecValue(this.networkFee).mul(u.FPNumber.fromCodecValue(this.getAssetFiatPrice(this.xor)??0)),l=a.add(i),o=this.calculatedRewards.mul(this.rewardAssetPrice);return o.sub(l).div(s).mul(u.FPNumber.HUNDRED)}get calculatedRoiPercentFormatted(){return(0,m.Gc)(this.calculatedRoiPercent,!0)}selectPeriod(e){this.interval=Number(e)}handleBaseAssetValue(e){this.baseAssetValue=e,e?this.liquidity&&(this.poolAssetValue=new u.FPNumber(this.baseAssetValue).mul(u.FPNumber.fromCodecValue(this.liquidity?.secondBalance??0)).div(u.FPNumber.fromCodecValue(this.liquidity?.firstBalance??0)).toString()):this.poolAssetValue=""}handlePoolAssetValue(e){this.poolAssetValue=e,e?this.liquidity&&(this.baseAssetValue=new u.FPNumber(this.poolAssetValue).mul(u.FPNumber.fromCodecValue(this.liquidity?.firstBalance??0)).div(u.FPNumber.fromCodecValue(this.liquidity?.secondBalance??0)).toString()):this.baseAssetValue=""}handleBaseAssetMax(){this.baseAsset&&this.handleBaseAssetValue((0,m.MN)(this.baseAsset,this.networkFee))}handlePoolAssetMax(){this.poolAsset&&this.handlePoolAssetValue((0,m.MN)(this.poolAsset,this.networkFee))}};(0,o.__decorate)([(0,r.fI)({default:()=>u.FPNumber.ZERO,type:Object})],b.prototype,"emission",void 0),(0,o.__decorate)([(0,r.RL)("visible")],b.prototype,"resetValue",null),b=(0,o.__decorate)([(0,r.wA)({components:{PairTokenLogo:(0,c.kF)(h.z8.PairTokenLogo),TokenInput:(0,c.kF)(h.z8.TokenInput),DialogBase:n.wx.DialogBase,InfoLine:n.wx.InfoLine,TokenLogo:n.wx.TokenLogo}})],b);var A=b,p=A,F=s(1001),P=(0,F.Z)(p,a,i,!1,null,"517668a0",null),g=P.exports}}]);