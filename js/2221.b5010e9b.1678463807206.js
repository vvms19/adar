"use strict";(self["webpackChunkpolkaswap_exchange_web"]=self["webpackChunkpolkaswap_exchange_web"]||[]).push([[2221,2240],{43037:function(t,s,i){i.r(s),i.d(s,{default:function(){return k}});var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"route-assets-review-details"},[i("div",{staticClass:"container route-assets-upload-template"},[i("div",{staticClass:"route-assets__page-header-title"},[t._v("Routing completed")]),i("div",{staticClass:"route-assets__page-header-description"},[t._v(" "+t._s("View the details of your recent routing transaction")+" ")]),i("div",{staticClass:"fields-container"},[i("div",{staticClass:"field"},[i("div",{staticClass:"field__label"},[t._v("INPUT ASSET")]),i("div",{staticClass:"field__value"},[i("div",[t._v(t._s(t.inputToken.symbol))]),i("div",[i("token-logo",{staticClass:"token-logo",attrs:{token:t.inputToken}})],1)])]),i("s-divider"),i("div",{staticClass:"field"},[i("div",{staticClass:"field__label"},[t._v("total")]),i("div",{staticClass:"field__value"},[t._v(" "+t._s(t.totalAmount)+" "),i("span",{staticClass:"usd"},[t._v(t._s(t.totalUSD))])])]),i("s-divider"),t.incompletedRecipientsLength>0?i("div",{staticClass:"field"},[i("div",{staticClass:"field__label"},[t._v("FAILED TRANSACTIONS")]),i("warning-message",{staticClass:"warning-message",attrs:{text:"re-run failed transactions",isError:!0}}),i("div",{staticClass:"field__value"},[t._v(" "+t._s(t.incompletedRecipientsLength)+" ")])],1):t._e()],1),i("div",{staticClass:"buttons-container"},[t.withErrors?i("s-button",{staticClass:"s-typography-button--big",attrs:{type:"primary"},on:{click:function(s){s.stopPropagation(),t.showFailedTransactionsDialog=!0}}},[t._v(" "+t._s("RE-RUN FAILED TRANSACTIONS")+" ")]):t._e(),i("s-button",{staticClass:"s-typography-button--big",attrs:{type:"secondary"},on:{click:function(s){return s.stopPropagation(),t.downloadPDF.apply(null,arguments)}}},[t._v(" "+t._s("DOWNLOAD PDF OVERVIEW")+" ")]),t.withErrors?i("s-button",{staticClass:"s-typography-button--big open-finish-routing-button",attrs:{type:"link"},on:{click:function(s){return s.stopPropagation(),t.openFinishRoutingDialog.apply(null,arguments)}}},[i("span",[t._v(t._s("Re-run doesn’t help? Finish routing anyway"))])]):i("s-button",{staticClass:"s-typography-button--big",attrs:{type:"primary"},on:{click:function(s){return s.stopPropagation(),t.onFinishRouting.apply(null,arguments)}}},[t._v(" "+t._s("FINISH")+" ")])],1)]),t.summaryData.length>0?i("div",{staticClass:"container routing-details-section"},[i("div",{staticClass:"route-assets__page-header-title"},[t._v("Routing Details")]),t._l(t.summaryData,(function(s,e){return i("div",{key:e,staticClass:"asset-data-container fields-container"},[i("div",{staticClass:"asset-title"},[i("div",[i("token-logo",{staticClass:"token-logo",attrs:{token:s.asset}})],1),i("div",[t._v(t._s(s.asset.symbol))])]),i("div",{staticClass:"field"},[i("div",{staticClass:"field__label"},[t._v("recipients")]),i("div",{staticClass:"field__value"},[t._v(t._s(s.recipientsNumber))])]),i("s-divider"),i("div",{staticClass:"field"},[i("div",{staticClass:"field__label"},[t._v("token AMOUNT routed")]),i("div",{staticClass:"field__value"},[t._v(t._s(t.formatNumber(s.total)))]),i("div",{staticClass:"field__value usd"},[t._v(t._s(t.formatNumber(s.usd)))])]),i("s-divider"),i("div",{staticClass:"field"},[i("div",{staticClass:"field__label"},[t._v("Status")]),i("div",{staticClass:"field__value",class:"field__value_"+s.status},[t._v(t._s(s.status))])])],1)}))],2):t._e(),i("failed-transactions-dialog",{attrs:{visible:t.showFailedTransactionsDialog},on:{"update:visible":function(s){t.showFailedTransactionsDialog=s}}}),i("confirm-finish-routing-dialog",{attrs:{visible:t.showFinishRoutingDialog},on:{"update:visible":function(s){t.showFinishRoutingDialog=s},onConfirmClick:t.onFinishRouting}})],1)},a=[],o=i(60760),n=i(70655),l=i(53545),r=i(50592),c=i(67748),u=i(32806),d=i(74614),p=i(37365),g=i(96486),_=i(63545),v=i(36930),h=i(22134),m=i(1168),f=i(18159),b=i.n(f);let y=class extends((0,l.Wr)(u.Z)){constructor(...t){super(...t),(0,o.Z)(this,"inputToken",void 0),(0,o.Z)(this,"completedRecipients",void 0),(0,o.Z)(this,"incompletedRecipients",void 0),(0,o.Z)(this,"recipients",void 0),(0,o.Z)(this,"fiatPriceObject",void 0),(0,o.Z)(this,"accountAssets",void 0),(0,o.Z)(this,"cancelProcessing",void 0),(0,o.Z)(this,"showFailedTransactionsDialog",!1),(0,o.Z)(this,"showFinishRoutingDialog",!1)}get incompletedRecipientsLength(){return this.incompletedRecipients.length}get totalAmount(){return this.formatNumber(this.totalUSD/Number(this.getAssetUSDPrice(this.inputToken)))}get totalUSD(){return(0,g.sumBy)(this.completedRecipients,(t=>Number(t.usd)))}get withErrors(){return this.incompletedRecipientsLength>0}get summaryData(){return Object.values((0,g.groupBy)(this.completedRecipients.map((t=>({symbol:t.asset.symbol,...t}))),"symbol")).map((t=>({recipientsNumber:t.length,asset:t[0].asset,usd:(0,g.sumBy)(t,(t=>Number(t.usd))),total:(0,g.sumBy)(t,(t=>Number(t.amount))),required:(0,g.sumBy)(t,(t=>Number(t.usd)))/Number(this.getAssetUSDPrice(this.inputToken)),totalTransactions:t.length,status:this.getStatus(t)})))}getStatus(t){return t.some((t=>t.status===_.p.FAILED))?"failed":t.find((t=>t.status===_.p.PENDING))?"waiting":"routed"}getAssetUSDPrice(t){return v.FPNumber.fromCodecValue(this.fiatPriceObject[t.address]??0,18)}formatNumber(t){return t&&Number.isFinite(t)?t.toLocaleString("en-US",{maximumFractionDigits:4}):"-"}openFinishRoutingDialog(){this.showFinishRoutingDialog=!0}onFinishRouting(){this.cancelProcessing(),this.showFinishRoutingDialog=!1}downloadPDF(){const t=new m.jsPDF({putOnlyUsedFonts:!0,orientation:"landscape"}),s=["№","Name","Wallet","USD","Input Token","Token","Amount","Status"],i=this.recipients.map(((t,s)=>[`${s+1}`,t.name.toString(),t.wallet.toString(),t.usd.toString(),this.inputToken.symbol,t.asset.symbol,(t.amount?.toFixed(5)||"").toString(),t.status.toString()]));b()(t,{head:[s],body:i}),t.save(`ADAR-${(new Date).toLocaleDateString("en-GB")}.pdf`)}};(0,n.__decorate)([d.Yn.routeAssets.inputToken],y.prototype,"inputToken",void 0),(0,n.__decorate)([d.Yn.routeAssets.completedRecipients],y.prototype,"completedRecipients",void 0),(0,n.__decorate)([d.Yn.routeAssets.incompletedRecipients],y.prototype,"incompletedRecipients",void 0),(0,n.__decorate)([d.Yn.routeAssets.recipients],y.prototype,"recipients",void 0),(0,n.__decorate)([d.SB.wallet.account.fiatPriceObject],y.prototype,"fiatPriceObject",void 0),(0,n.__decorate)([d.SB.wallet.account.accountAssets],y.prototype,"accountAssets",void 0),(0,n.__decorate)([d.aD.routeAssets.cancelProcessing],y.prototype,"cancelProcessing",void 0),y=(0,n.__decorate)([(0,l.wA)({components:{TokenLogo:p.wx.TokenLogo,WarningMessage:h["default"],FailedTransactionsDialog:(0,c.y)(r.EC.RouteAssetsFailedTransactionsDialog),ConfirmFinishRoutingDialog:(0,c.y)(r.EC.RouteAssetsConfirmFinishRoutingDialog)}})],y);var C=y,D=C,R=i(1001),w=(0,R.Z)(D,e,a,!1,null,"53864e37",null),k=w.exports}}]);